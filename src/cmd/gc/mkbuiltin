#!/bin/rc
# Copyright 2009 The Go Authors. All rights reserved.
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file.

exit ''

$CC $CFLAGS mkbuiltin1.c && $LD -o $O.mkbuiltin1 mkbuiltin1.$O

rm -f _builtin.c
for (i in runtime unsafe){
	$GC -A $i.go
	O=$O ./mkbuiltin1 $i >>_builtin.c
}

# If _builtin.c has changed vs builtin.c.boot,
# check in the new change if being run by
# one of the people who tends to work on
# the compiler.  This makes sure that changes
# don't get forgotten, without causing problems
# in end user Go repositories.

if(! cmp _builtin.c builtin.c.boot >/dev/null >[2=1])
	cp _builtin.c builtin.c.boot

cat _builtin.c
rm -f _builtin.c
